#!/usr/bin/env ruby

require "gruff"

chart = Gruff::Line.new
chart.title = "PDFium 8 hour stress test"
seconds = []
memory  = []
DATA.read.split("; ").each do | pass|
  data = pass.split
  seconds << data[1].to_i
  memory  << data[2].gsub(/\,/,'').to_i
end

# removed since it doesn't change and a static line isn't helpful
# chart.data :Seconds, seconds
chart.data :Memory,  memory

chart.write "chart.png"


__END__

1 88.91 201,164; 2 88.80 196,296; 3 87.80 190,364; 4 87.99 188,044; 5 91.20 195,488; 6 88.39 197,452; 7 88.69 197,872; 8 88.97 199,260; 9 89.13 194,232; 10 89.58 187,028; 11 89.68 204,016; 12 89.25 195,672; 13 89.89 195,556; 14 89.37 204,584; 15 90.01 211,372; 16 88.13 216,304; 17 87.44 226,740; 18 88.29 240,560; 19 87.72 238,460; 20 88.05 239,384; 21 87.75 252,528; 22 87.83 254,904; 23 87.75 261,280; 24 87.95 261,648; 25 87.99 260,868; 26 88.18 261,132; 27 87.88 261,020; 28 87.71 260,400; 29 88.47 261,536; 30 88.54 261,744; 31 87.93 262,372; 32 88.48 263,308; 33 87.94 261,456; 34 88.41 261,692; 35 87.86 261,676; 36 87.82 262,288; 37 88.59 262,220; 38 87.67 261,044; 39 87.69 260,352; 40 88.01 260,304; 41 87.94 260,652; 42 87.64 262,132; 43 87.56 261,488; 44 88.02 262,232; 45 88.09 260,600; 46 88.93 259,428; 47 89.65 261,984; 48 88.21 262,240; 49 87.79 261,668; 50 88.24 262,000; 51 87.87 262,296; 52 87.60 261,312; 53 87.95 261,816; 54 87.79 263,468; 55 88.42 261,796; 56 88.27 261,496; 57 88.50 262,352; 58 87.58 261,908; 59 88.97 261,076; 60 87.91 262,444; 61 87.48 262,508; 62 88.61 270,572; 63 88.04 270,320; 64 88.51 269,640; 65 87.46 270,636; 66 87.90 271,608; 67 87.97 270,584; 68 88.62 269,660; 69 88.82 270,728; 70 88.68 269,616; 71 88.73 270,652; 72 88.31 271,660; 73 88.32 270,180; 74 88.51 270,992; 75 88.52 270,188; 76 87.81 270,644; 77 87.82 270,636; 78 88.51 268,904; 79 87.99 268,992; 80 88.42 269,336; 81 88.40 269,756; 82 87.99 271,692; 83 88.28 268,744; 84 88.06 270,668; 85 88.27 271,120; 86 87.43 269,784; 87 87.37 271,692; 88 87.82 270,616; 89 88.21 270,528; 90 88.13 269,632; 91 88.07 269,404; 92 88.47 268,968; 93 87.82 270,668; 94 88.13 268,800; 95 88.23 270,036; 96 88.39 268,140; 97 88.18 271,008; 98 88.20 270,688; 99 87.48 271,708; 100 88.19 270,200; 101 87.48 269,200; 102 88.37 270,604; 103 87.49 269,940; 104 87.38 271,956; 105 88.29 270,984; 106 87.39 269,984; 107 87.30 269,880; 108 87.52 270,880; 109 87.77 270,000; 110 88.04 270,312; 111 87.67 270,836; 112 87.69 270,668; 113 88.92 270,992; 114 92.83 269,428; 115 89.55 270,332; 116 88.65 270,296; 117 87.93 270,212; 118 90.40 270,436; 119 89.10 269,624; 120 88.15 269,520; 121 87.40 271,176; 122 88.89 270,704; 123 89.90 271,240; 124 89.23 271,200; 125 87.96 268,780; 126 90.31 271,464; 127 89.52 270,200; 128 90.88 271,976; 129 89.18 270,716; 130 88.90 269,992; 131 88.73 271,808; 132 88.56 270,976; 133 88.14 271,232; 134 87.08 270,176; 135 87.93 269,380; 136 86.53 270,864; 137 86.71 269,432; 138 87.20 269,924; 139 87.82 271,600; 140 87.84 271,700; 141 88.42 272,888; 142 88.29 270,904; 143 88.51 272,040; 144 88.18 270,612; 145 87.70 270,816; 146 89.18 270,868; 147 88.84 269,776; 148 88.16 272,788; 149 87.98 272,020; 150 88.13 272,788; 151 88.11 271,868; 152 88.43 271,284; 153 88.46 270,820; 154 89.37 270,068; 155 88.39 270,764; 156 87.99 270,192; 157 88.28 270,088; 158 87.78 271,276; 159 87.57 272,776; 160 87.57 270,864; 161 89.10 271,816; 162 88.40 270,868; 163 87.81 270,572; 164 88.13 270,756; 165 87.80 270,936; 166 87.77 270,816; 167 89.20 270,756; 168 86.86 270,192; 169 86.80 271,356; 170 86.69 270,444; 171 86.95 270,036; 172 87.37 271,764; 173 87.27 270,128; 174 87.41 270,752; 175 87.53 271,588; 176 87.50 271,716; 177 87.85 270,264; 178 87.32 270,856; 179 87.28 270,236; 180 87.70 270,816; 181 87.81 271,684; 182 87.86 270,232; 183 87.58 271,832; 184 88.51 271,816; 185 87.43 271,412; 186 88.15 270,784; 187 87.33 270,804; 188 87.66 271,504; 189 87.28 269,500; 190 87.54 271,356; 191 87.89 269,112; 192 88.03 272,280; 193 87.64 272,000; 194 87.53 271,852; 195 87.65 271,656; 196 88.56 270,740; 197 87.85 271,212; 198 88.65 270,804; 199 87.63 272,864; 200 87.38 271,840; 201 87.60 272,044; 202 88.34 270,384; 203 88.20 271,328; 204 87.48 272,160; 205 87.61 271,504; 206 87.69 272,412; 207 87.57 271,144; 208 87.66 270,424; 209 88.14 270,828; 210 88.80 272,256; 211 88.65 271,284; 212 88.42 272,176; 213 88.45 272,204; 214 88.12 271,544; 215 87.91 271,752; 216 87.82 271,432; 217 88.04 271,380; 218 87.84 271,448; 219 87.82 271,356; 220 90.04 271,788; 221 89.30 271,960; 222 88.35 270,936; 223 87.53 270,988; 224 87.59 271,524; 225 87.81 271,068; 226 87.43 270,828; 227 87.79 272,192; 228 87.69 270,224; 229 88.00 272,264; 230 87.84 270,716; 231 87.87 271,960; 232 87.91 271,016; 233 87.24 270,292; 234 87.58 271,988; 235 87.75 272,308; 236 87.51 272,876; 237 87.84 271,020; 238 87.38 272,904; 239 87.50 270,996; 240 87.86 272,988; 241 87.33 271,376; 242 86.94 272,056; 243 89.08 272,064; 244 87.52 270,256; 245 87.51 271,680; 246 89.77 272,988; 247 91.52 273,040; 248 89.59 272,016; 249 89.77 272,132; 250 90.21 271,964; 251 93.41 271,964; 252 90.29 272,092; 253 90.40 272,284; 254 89.42 271,852; 255 90.23 272,692; 256 89.97 270,248; 257 91.02 257,760; 258 90.09 269,688; 259 88.65 269,540; 260 88.16 267,512; 261 88.42 268,464; 262 88.81 268,236; 263 89.97 268,536; 264 88.39 268,276; 265 89.04 268,068; 266 88.99 269,372; 267 89.35 269,276; 268 89.04 267,284; 269 89.49 268,508; 270 88.68 269,352; 271 89.54 268,376; 272 89.31 267,108; 273 88.75 269,320; 274 88.67 267,820; 275 88.26 269,604; 276 87.89 268,576; 277 88.29 268,896; 278 91.68 269,216; 279 91.50 271,192; 280 89.84 271,136; 281 89.16 269,832; 282 89.11 270,864; 283 89.91 269,560; 284 88.90 269,364; 285 89.56 266,960; 286 89.39 268,432; 287 91.14 271,032; 288 89.42 271,096; 289 90.43 268,276; 290 90.21 270,200; 291 89.19 269,224; 292 90.42 270,392; 293 88.94 270,020; 294 89.13 270,024; 295 90.13 269,208; 296 89.23 268,360; 297 91.34 269,804; 298 88.87 270,196; 299 89.68 270,224; 300 90.01 269,320
